第８回講座課題  
docker-mysql-hands-on  
環境 : Windows11 Home  ( Bash on Ubuntu on Windows )
参考：https://docs.microsoft.com/ja-jp/windows/wsl/install

### Dockerの準備  
```
$ docker -v  
Docker version 20.10.17, build 100c701
```
### 手順　　
レポジトリを任意のディレクトリ配下にてclone  
*ハンズオンは２度目なのでlsコマンドで確認  
```
$ ls
docker-mysql-hands-on  
```  
ディレクトリに移動する
```
$cd docker-my-sql-hands-on  
(Tabキーにて候補から選択)  
```  
docker-compose.ymlがあることを確認する  
```
$ ls
Dockerfile  README.md  conf  docker-compose.yml  (genie)*  renovate.json  sql  
```  
docker-compose.yml確認  
(しかし本来は無いはずのgenieというものが紛れ込んでいる  
以前試行錯誤した残骸なので削除)
```
$ rm -r genie
$ ls 
Dockerfile  README.md  conf  docker-compose.yml  renovate.json  sql  
```
(無事に削除出来た模様)  

コンテナを起動する  
```
$ docker compose up -d  
[+] Running 2/2
 ⠿ Network docker-mysql-hands-on_default  Created                                                                  1.1s
 ⠿ Container docker-mysql-hands-on        Started                                                                  3.5s
 ```  

コンテナを確認  
docker-mysql-hands-onがあればOKとのこと  
```
CONTAINER ID   IMAGE                      COMMAND                  CREATED         STATUS         PORTS                               NAMES
5d62fd5d5e11   docker-mysql-hands-on_db   "docker-entrypoint.s…"   2 minutes ago   Up 2 minutes   33060/tcp, 0.0.0.0:3307->3306/tcp   docker-mysql-hands-on  
```
docker-mysql-hands-on確認  

MySQLにログイン  
パスワードは「password」  
```
$ docker compose exec db mysql -uroot -p  
mysql: [Warning] World-writable config file '/etc/my.cnf' is ignored.
Enter password:
Welcome to the MySQL monitor.  Commands end with ; or \g.
Your MySQL connection id is 8
Server version: 8.0.30 MySQL Community Server - GPL

Copyright (c) 2000, 2022, Oracle and/or its affiliates.

Oracle is a registered trademark of Oracle Corporation and/or its
affiliates. Other names may be trademarks of their respective
owners.

Type 'help;' or '\h' for help. Type '\c' to clear the current input statement.

mysql>
```
MySQLにログイン出来た様子  
しかし何らかのwarningが出ている  
mysql: [Warning] World-writable config file '/etc/my.cnf' is ignored.   

参考サイト：https://it-afi.com/mysql/mysql%e8%b5%b7%e5%8b%95%e5%a4%b1%e6%95%97%e3%80%82-warning-world-writable-config-file-etc-my-cnf-is-ignored：  

WSL環境で、Windowsのファイルシステム上のディレクトリで作業していたことがが原因 、作業ディレクトリをWSLのホームディレクトリ配下に変える事象解決、とある  

起動は出来ているのこの環境で続行　　

movie_listの確認  
```
mysql> show databases;
+--------------------+
| Database           |
+--------------------+
| information_schema |
| movie_list         |
| mysql              |
| performance_schema |
| sys                |
+--------------------+
5 rows in set (0.05 sec)
```
movie_listの利用を開始  
```
mysql> use movie_list;
Reading table information for completion of table and column names
You can turn off this feature to get a quicker startup with -A

Database changed
```
moviesテーブルがあることを確認  
```
mysql> show tables;
+----------------------+
| Tables_in_movie_list |
+----------------------+
| movies               |
+----------------------+
1 row in set (0.00 sec)  
```
moviesテーブルのレコードを確認 
``` 
mysql>  select * from movies;
+----+--------------------------------+-----------------------------+
| id | name                           | director                    |
+----+--------------------------------+-----------------------------+
|  1 | ショーシャンクの空に           | フランク・ダラボン          |
|  2 | この世界の片隅に               | 片渕須直                    |
+----+--------------------------------+-----------------------------+
2 rows in set (0.00 sec)
```
テーブルにレコードを追加  
```
mysql>  insert into movies (name, director) values ("ゴッドファーザー", "フランシス・フォード・コッポラ");
Query OK, 1 row affected (0.03 sec)  
```
レコードの登録結果を確認  
```
mysql> select * from movies;
+----+--------------------------------+-----------------------------------------------+
| id | name                           | director                                      |
+----+--------------------------------+-----------------------------------------------+
|  1 | ショーシャンクの空に           | フランク・ダラボン                            |
|  2 | この世界の片隅に               | 片渕須直                                      |
|  3 | ゴッドファーザー               | フランシス・フォード・コッポラ                |
+----+--------------------------------+-----------------------------------------------+
3 rows in set (0.00 sec)  
```
ログアウト  
```
mysql> exit;
Bye
```
起動したDockerコンテナを停止する  
```
$ docker compose down
[+] Running 2/2
 ⠿ Container docker-mysql-hands-on        Removed                                                                  4.3s
 ⠿ Network docker-mysql-hands-on_default  Removed                                                                  0.8s
```
停止できていることを確認  
```
$ docker ps
CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES
```
ハンズオン完了  




